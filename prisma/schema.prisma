generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

// 1. อีเวนต์ (หลัก)
model Event {
  id                Int      @id @default(autoincrement())
  name              String
  description       String?  @db.Text
  start_date        String?
  end_date          String?
  client_name       String?
  location          String?
  total_budget      Float?
  venue_name        String?
  venue_url         String?
  accommodation_name String?
  accommodation_url String?
  drive_link        String?
  
  createdAt         DateTime @default(now())
  updatedAt         DateTime @updatedAt

  // ความสัมพันธ์กับตารางอื่น
  expenses          Expense[]
  days              EventDay[]
  tasks             Task[]
}

// 2. ค่าใช้จ่าย
model Expense {
  id          Int      @id @default(autoincrement())
  name        String
  amount      Float
  date        String?
  time        String?
  category    String?
  icon        String?
  
  eventId     Int
  event       Event    @relation(fields: [eventId], references: [id], onDelete: Cascade)
}

// 3. วันใน Timeline
model EventDay {
  id          Int      @id @default(autoincrement())
  date        String
  title       String?
  
  eventId     Int
  event       Event    @relation(fields: [eventId], references: [id], onDelete: Cascade)
  
  items       ScheduleItem[]
}

// 4. กิจกรรมใน Timeline
model ScheduleItem {
  id          Int      @id @default(autoincrement())
  start_time  String
  end_time    String?
  title       String
  description String?
  location    String?
  icon        String?
  
  dayId       Int
  day         EventDay @relation(fields: [dayId], references: [id], onDelete: Cascade)
}

// 5. งานที่ต้องทำ (Tasks)
model Task {
  id           Int      @id @default(autoincrement())
  title        String
  is_completed Boolean  @default(false)
  due_date     String?
  
  eventId      Int
  event        Event    @relation(fields: [eventId], references: [id], onDelete: Cascade)
}

// 6. หมวดหมู่ (Settings)
model Category {
  id        Int      @id @default(autoincrement())
  name      String
  icon      String?
}